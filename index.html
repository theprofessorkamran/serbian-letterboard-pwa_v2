<!DOCTYPE html>
<html lang="sr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="theme-color" content="#222831">
  <title>SR Govorni Taster â€“ Serbian Letterboard</title>
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="apple-touch-icon" href="icon-192.png">
  <meta name="description" content="Velike tipke za slovkanje na srpskom (latinica/Ä‡irilica), gotove fraze po kategorijama i govor. Radi offline posle prvog uÄitavanja.">
  <style>
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,'Noto Sans',sans-serif;background:#0f141a;color:#e6eef2}
    .appbar{position:sticky;top:0;background:#222831;padding:12px 16px;display:flex;gap:12px;align-items:center;z-index:10}
    .appbar h1{font-size:18px;margin:0;flex:1}
    .btn{background:#39424e;border:none;color:#e6eef2;padding:10px 12px;border-radius:10px;font-size:16px}
    .btn:active{transform:scale(0.98)}
    .container{display:grid;grid-template-columns:1fr;gap:12px;padding:12px}
    @media(min-width:1100px){.container{grid-template-columns:1fr 420px}}
    textarea{width:100%;min-height:120px;font-size:28px;line-height:1.3;padding:12px;border-radius:12px;border:1px solid #3b4652;background:#0f141a;color:#e6eef2}
    .panel{background:#111821;border:1px solid #2c3742;border-radius:14px;padding:12px}
    .keys{display:grid;grid-template-columns:repeat(4,minmax(70px,1fr));gap:10px}
    .key{font-size:26px;padding:18px 8px;border-radius:14px;background:#22303c;border:1px solid #2e3b48;text-align:center;user-select:none}
    .key:active{filter:brightness(1.1)}
    .controls{display:flex;flex-wrap:wrap;gap:8px}
    .pill{padding:10px 14px;border-radius:999px;background:#243140;border:1px solid #2f3d4c}
    .row{display:flex;gap:8px;flex-wrap:wrap}
    .hidden{display:none !important}
    .footer{opacity:.7;font-size:12px;padding:16px;text-align:center}
    .tabbar{display:flex;gap:8px;margin-bottom:8px;overflow:auto}
    .tab{padding:10px 14px;border-radius:999px;border:1px solid #2f3d4c;background:#243140;cursor:pointer;white-space:nowrap}
    .tab.active{background:#34506a}
    .chips{display:flex;gap:8px;flex-wrap:wrap;margin:6px 0 0}
    .phrase{padding:12px 14px;border-radius:12px;background:#1f2832;border:1px solid #2b3947;font-size:18px}
    .phrase:active{filter:brightness(1.15)}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:8px}
    .section-title{margin:0 0 6px 0;font-size:18px}
    .right-dock{order:2}
    .left-dock{order:1}
    .category-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
    @media(max-width:480px){
      .key{font-size:22px;padding:16px 6px}
      textarea{min-height:140px;font-size:24px}
    }
  </style>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="appbar">
    <img src="icon-192.png" alt="SR" width="28" height="28" style="border-radius:6px">
    <h1>SR Govorni Taster</h1>
    <button class="btn" id="installBtn" title="Instaliraj na poÄetni ekran" aria-label="Install">â• Instaliraj</button>
    <button class="btn" id="helpBtn" title="PomoÄ‡">â“</button>
  </div>

  <div class="container">
    <!-- Compose on top -->
    <section class="panel" id="composePanel" aria-labelledby="composeHeading">
      <h2 id="composeHeading" style="margin:0 0 8px 0;font-size:18px;">Brza poruka</h2>
      <textarea id="textOut" placeholder="Ako nema u frazama, napiÅ¡ite ovdeâ€¦"></textarea>
      <div class="controls" style="margin-top:10px">
        <button class="btn" id="speakBtn">ğŸ”Š Izgovori</button>
        <button class="btn" id="shareBtn">ğŸ“¤ Podeli</button>
        <button class="btn" id="copyBtn">ğŸ“‹ Kopiraj</button>
        <button class="btn" id="clearBtn">ğŸ§¹ OÄisti</button>
        <button class="btn" id="backspaceBtn">âŒ«</button>
        <button class="btn" id="spaceBtn">â£</button>
        <button class="btn" id="enterBtn">â</button>
      </div>
    </section>

    <!-- Front-and-center phrase board -->
    <section class="panel" id="phrasesPanel" aria-labelledby="phrasesHeading">
      <div class="category-head">
        <h2 id="phrasesHeading" class="section-title">Spremne fraze</h2>
        <div class="row">
          <label class="pill"><input type="checkbox" id="capsToggle"> Velika slova</label>
          <label class="pill"><input type="checkbox" id="latinToggle" checked> Latinica</label>
          <label class="pill"><input type="checkbox" id="leftHandToggle" checked> Levoruko</label>
        </div>
      </div>

      <div class="tabbar" id="catTabs" role="tablist" aria-label="Kategorije fraza"></div>
      <div id="catContent" class="grid" aria-live="polite"></div>
    </section>

    <!-- Letterboard keyboard -->
    <aside class="panel left-dock" id="keyboardPanel" aria-labelledby="kbdHeading">
      <h2 id="kbdHeading" class="section-title">Tabla sa slovima</h2>
      <div class="keys" id="keys"></div>
    </aside>

    <!-- Share / Receive -->
    <section class="panel right-dock" id="sharePanel" aria-labelledby="shareHeading">
      <h2 id="shareHeading" class="section-title">Deljenje izmeÄ‘u ureÄ‘aja</h2>
      <div class="tabbar">
        <div class="tab active" data-tab="sendTab">PoÅ¡alji</div>
        <div class="tab" data-tab="receiveTab">Primi (QR)</div>
      </div>
      <div id="sendTab" class="tabcontent">
        <p>PoÅ¡aljite poruku na drugi ureÄ‘aj pomoÄ‡u **Nearby Share** / BT / Wiâ€‘Fi Direct <em>ili</em> prikaÅ¾ite QR kod iz sistemskog menija za deljenje (Chrome &rarr; â€QR kodâ€). Sve radi i bez interneta.</p>
        <div class="row" style="margin:8px 0">
          <button class="btn" id="sysShareBtn">ğŸ“¤ Podeli ovu poruku</button>
        </div>
        <p id="shareStatus" style="opacity:.7"></p>
      </div>
      <div id="receiveTab" class="tabcontent hidden">
        <p>Skener Äita **QR kod** sa drugog ureÄ‘aja i automatski izgovara tekst. TakoÄ‘e moÅ¾ete nalepiti tekst ruÄno.</p>
        <textarea id="receiveBox" placeholder="Nalepi tekst ovdeâ€¦"></textarea>
        <div class="controls" style="margin-top:8px">
          <button class="btn" id="receiveSpeakBtn">ğŸ”Š Izgovori</button>
          <button class="btn" id="receiveCopyBtn">ğŸ“‹ Kopiraj u glavno polje</button>
        </div>
        <hr style="border-color:#2c3742">
        <div class="row">
          <button class="btn" id="startScanBtn">ğŸ“· ZapoÄni skeniranje</button>
          <button class="btn" id="stopScanBtn" disabled>â–  Zaustavi</button>
        </div>
        <video id="preview" playsinline muted class="hidden" style="width:100%;max-height:220px;margin-top:8px;border-radius:10px;border:1px solid #2c3742;"></video>
        <canvas id="scanCanvas" class="hidden"></canvas>
        <p id="scanStatus" style="opacity:.7"></p>
      </div>
    </section>
  </div>

  <div class="footer">
    Offline PWA. Za najbolje rezultate instalirajte srpski glas u podeÅ¡avanjima Android â†’ Tekstâ€‘uâ€‘govor (Google TTS).
  </div>

  <script defer src="app.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./service-worker.js').catch(console.error);
      });
    }
  </script>
</body>
</html>
